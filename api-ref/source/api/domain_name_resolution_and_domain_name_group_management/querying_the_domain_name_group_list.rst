:original_name: ListDomainSets.html

.. _ListDomainSets:

Querying the Domain Name Group List
===================================

Function
--------

This API is used to query the domain name group list.

URI
---

GET /v1/{project_id}/domain-sets

.. table:: **Table 1** Path Parameters

   +------------+-----------+--------+----------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter  | Mandatory | Type   | Description                                                                                                                            |
   +============+===========+========+========================================================================================================================================+
   | project_id | Yes       | String | Project ID, which can be obtained by calling an API or from the console. For details, see :ref:`Obtaining a Project ID <cfw_02_0015>`. |
   +------------+-----------+--------+----------------------------------------------------------------------------------------------------------------------------------------+

.. table:: **Table 2** Query Parameters

   +-----------------------+-----------+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Mandatory | Type    | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   +=======================+===========+=========+=============================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+
   | enterprise_project_id | No        | String  | Enterprise project ID, which is the ID of a project planned based on organizations. You can obtain the enterprise project ID by referring to :ref:`Obtaining an Enterprise Project ID <cfw_02_0027>`. If the enterprise project function is not enabled, the value is **0**.                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
   +-----------------------+-----------+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | fw_instance_id        | Yes       | String  | Firewall ID, which can be obtained by referring to :ref:`Obtaining a Firewall ID <cfw_02_0028>`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   +-----------------------+-----------+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | limit                 | Yes       | Integer | Number of records displayed on each page. The value ranges from 1 to 1024.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
   +-----------------------+-----------+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | offset                | Yes       | Integer | Offset, which specifies the start position of the record to be returned. The value must be a number no less than 0. The default value is **0**.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   +-----------------------+-----------+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | object_id             | Yes       | String  | Protected object ID, which is used to distinguish between Internet border protection and VPC border protection after a cloud firewall is created. You can obtain the ID by calling the :ref:`API for querying firewall instances <listfirewalldetail>`. In the return value, find the ID in **data.records.protect_objects.object_id** (The period [.] is used to separate different levels of objects). If the value of **type** is **0**, the protected object ID belongs to the Internet border. If the value of **type** is **1**, the protected object ID belongs to the VPC border. You can obtain the value of **type** from **data.records.protect_objects.type** (The period [.] is used to separate different levels of objects). |
   +-----------------------+-----------+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | key_word              | No        | String  | Keyword, which can be the domain name group name or description.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   +-----------------------+-----------+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | domain_set_type       | No        | Integer | Domain name group typ: **0** (application domain name group), **1** (network domain name group).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   +-----------------------+-----------+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | config_status         | No        | Integer | Configuration status: **-1** (unconfigured), **0** (configuration failed), **1** (configuration succeeded), **2** (configuring), **3** (normal), or **4** (abnormal).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
   +-----------------------+-----------+---------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request Parameters
------------------

.. table:: **Table 3** Request header parameters

   +--------------+-----------+--------+---------------------------------------------------------------------------------------------------+
   | Parameter    | Mandatory | Type   | Description                                                                                       |
   +==============+===========+========+===================================================================================================+
   | X-Auth-Token | Yes       | String | User token. You can obtain the token by referring to :ref:`Obtaining a User Token <cfw_02_0029>`. |
   +--------------+-----------+--------+---------------------------------------------------------------------------------------------------+
   | Content-Type | Yes       | String | Content type. It can only be set to application/json.                                             |
   +--------------+-----------+--------+---------------------------------------------------------------------------------------------------+

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 4** Response body parameters

   +-----------+------------------------------------------------------------------------------------------------+--------------------------------------------------------+
   | Parameter | Type                                                                                           | Description                                            |
   +===========+================================================================================================+========================================================+
   | data      | :ref:`ListDomainsetsResponseData <listdomainsets__response_listdomainsetsresponsedata>` object | Returned data for querying the domain name group list. |
   +-----------+------------------------------------------------------------------------------------------------+--------------------------------------------------------+

.. _listdomainsets__response_listdomainsetsresponsedata:

.. table:: **Table 5** ListDomainsetsResponseData

   +-----------+----------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter | Type                                                                       | Description                                                                                                                                     |
   +===========+============================================================================+=================================================================================================================================================+
   | limit     | Integer                                                                    | Number of records displayed on each page. The value ranges from 1 to 1024.                                                                      |
   +-----------+----------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+
   | offset    | Integer                                                                    | Offset, which specifies the start position of the record to be returned. The value must be a number no less than 0. The default value is **0**. |
   +-----------+----------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+
   | total     | Integer                                                                    | Total number of domain name groups.                                                                                                             |
   +-----------+----------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+
   | records   | Array of :ref:`DomainSetVo <listdomainsets__response_domainsetvo>` objects | Domain name group list.                                                                                                                         |
   +-----------+----------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+

.. _listdomainsets__response_domainsetvo:

.. table:: **Table 6** DomainSetVo

   +-----------------+------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Type                                                                   | Description                                                                                                                                                           |
   +=================+========================================================================+=======================================================================================================================================================================+
   | set_id          | String                                                                 | Domain name group ID.                                                                                                                                                 |
   +-----------------+------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | name            | String                                                                 | Domain name group name.                                                                                                                                               |
   +-----------------+------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | description     | String                                                                 | Domain name group description.                                                                                                                                        |
   +-----------------+------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | ref_count       | Integer                                                                | Number of times a domain name group is referenced by rules.                                                                                                           |
   +-----------------+------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | domain_set_type | Integer                                                                | Domain name group typ: **0** (application domain name group), **1** (network domain name group).                                                                      |
   +-----------------+------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | config_status   | Integer                                                                | Configuration status: **-1** (unconfigured), **0** (configuration failed), **1** (configuration succeeded), **2** (configuring), **3** (normal), or **4** (abnormal). |
   +-----------------+------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | rules           | Array of :ref:`UseRuleVO <listdomainsets__response_userulevo>` objects | Used rule ID list.                                                                                                                                                    |
   +-----------------+------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _listdomainsets__response_userulevo:

.. table:: **Table 7** UseRuleVO

   ========= ====== ===========
   Parameter Type   Description
   ========= ====== ===========
   id        String Rule ID.
   name      String Rule name.
   ========= ====== ===========

Example Requests
----------------

Query the domain name group list of firewall 546af3f8-88e9-47f2-a205-2346d7090925 in project 9d80d070b6d44942af73c9c3d38e0429. The protected object ID is ae42418e-f077-41a0-9d3b-5b2f5ad9102b.

.. code-block::

   https://{Endpoint}/v1/9d80d070b6d44942af73c9c3d38e0429/domain-sets?fw_instance_id=546af3f8-88e9-47f2-a205-2346d7090925&enterprise_project_id=default&limit=50&offset=0&object_id=ae42418e-f077-41a0-9d3b-5b2f5ad9102b

Example Responses
-----------------

**Status code: 200**

Return value for querying the domain name group list.

.. code-block::

   {
     "data" : {
       "limit" : 50,
       "offset" : 0,
       "records" : [ {
         "config_status" : 3,
         "description" : "",
         "domain_set_type" : 0,
         "name" : "ccdd",
         "ref_count" : 0,
         "rules" : [ ],
         "set_id" : "e43db369-a863-45ed-8850-58d6b571b1ab"
       } ],
       "total" : 1
     }
   }

Status Codes
------------

=========== =====================================================
Status Code Description
=========== =====================================================
200         Return value for querying the domain name group list.
=========== =====================================================

Error Codes
-----------

See :ref:`Error Codes <errorcode>`.
